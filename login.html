<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merchant Login</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body { font-family: Arial; background:#f5f7fb; padding:40px; }
.card { max-width:420px; margin:auto; background:#fff; padding:24px; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.08); }
input { width:100%; padding:12px; margin-top:10px; border-radius:8px; border:1px solid #ddd; }
button { width:100%; padding:14px; margin-top:16px; border:none; border-radius:10px; background:#000; color:#fff; font-weight:bold; cursor:pointer; }
.msg { margin-top:12px; font-size:14px; }
</style>
</head>

<body>

<div class="card">
  <h2>Merchant Login</h2>
  <input id="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <button id="loginBtn">Login</button>
  <div id="msg" class="msg"></div>
</div>

<script>

const SUPABASE_URL = "https://wyzwjfaiggymxfjkrfuq.supabase.co";

const SUPABASE_ANON_KEY = "PASTE_YOUR_KEY_HERE";

const supabaseClient = window.supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

const msg = document.getElementById("msg");

let loggingIn = false;

document.getElementById("loginBtn").addEventListener("click", async () => {

  if (loggingIn) return;
  loggingIn = true;

  msg.textContent = "Signing in...";

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;

  const { error } = await supabaseClient.auth.signInWithPassword({
    email,
    password
  });

  if (error) {
    msg.textContent = error.message;
    loggingIn = false;
    return;
  }

  msg.textContent = "Login success";

  setTimeout(() => {
    window.location.href = "./index.html";
  }, 600);

});

</script>

</body>
</html>
